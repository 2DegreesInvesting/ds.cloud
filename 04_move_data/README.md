# Move data around

```bash
# Connect to the server
ssh root@174.138.4.109

# Add some data
cd /
mkdir data
touch data/a.csv data/b.csv
```

#### Move data between a server and your computer with `scp`

Copy directory from a remote host to local host:

```bash
scp -r root@174.138.4.109:/data /tmp
```

Copy directory from local host to a remote host:

```bash
scp -r /local/directory/ root@to_host:/remote/directory/
```


#### Move data between a server and a container, and between containers

> Volumes are the preferred mechanism for persisting data generated by and used
by Docker containers. While **bind mounts** are dependent on the directory
structure and OS of the host machine, **volumes** are completely managed by
Docker.  
-- https://docs.docker.com/storage/volumes/

```bash
# Run a container from https://www.rocker-project.org/
docker run --rm -d --name my_container \
  -p 8787:8787 -e PASSWORD=123 \
  -v /bind_mount:/bind_mount \
  -v volume_managed_by_docker:/volume_managed_by_docker \
  -e ROOT=true \
  rocker/verse

docker volume
ls /

# Login to rstudio at http://174.138.4.109:8787
ls /
```

#### Move data between a container (or server) and GitHub with `gh`

Setup the [`gh` CLI](https://cli.github.com/).

```bash
# https://github.com/cli/cli#installation, e.g. for Linux
curl -fsSL https://cli.github.com/packages/githubcli-archive-keyring.gpg | sudo dd of=/usr/share/keyrings/githubcli-archive-keyring.gpg
sudo chmod go+r /usr/share/keyrings/githubcli-archive-keyring.gpg
echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/githubcli-archive-keyring.gpg] https://cli.github.com/packages stable main" | sudo tee /etc/apt/sources.list.d/github-cli.list > /dev/null
sudo apt update
sudo apt install gh

# Authenticate with GitHub.com via a new SSH key
gh auth login
```

Get and share small datasets as usual.

```bash
# Or `git clone git@github.com:2DegreesInvesting/ds.cloud.git`
gh repo clone 2degreesinvesting/ds.cloud

# Add some data
mkdir data
touch data/a.csv data/b.csv

# Share data as usual
# git config --global user.email "maurolepore@gmail.com"
# git config --global user.name "Mauro Lepore"
git add data
git commit -m "New data"
git push
```

Share bigger datasets as assets attached to GitHub releases:

> If you need to distribute large files within your repository, you can create releases on GitHub.com.  
> We don't limit the total size of the binary files in the release or the bandwidth used to deliver them. However, each individual file must be smaller than 2 GB.  
-- [Distributing large binaries](https://docs.github.com/en/repositories/working-with-files/managing-large-files/about-large-files-on-github#distributing-large-binaries)


```bash
# Create a GitHub release
gh release craete v1

# Create (c) a compressed (z) file (f) named "data.tar.gz" from files in "data/"
tar czf data.tar.gz data

# Upload the data and attach it as an asset to the release
gh release upload v1 data.tar.gz
```

Get bigger datasets from assets attached to GitHub releases.

```bash
# If you work from outside the repo that has the assets, use the flag `--repo`
cd ~
gh release download v1 -p data.tar.gz --repo 2degreesinvesting/ds.cloud

# Extract (x) the archive file (f) data.tar.gz
tar xf
```
