# More ways to move data around

### Setup

Connect your local and remote computers via SSH: [account/security > Add SSH Key](https://cloud.digitalocean.com/account/security)

Local terminal (e.g. your laptop)

```bash
# Add some data
mkdir /tmp/data
cd /tmp
touch data/a.csv data/b.csv
ls
```

Remote terminal (e.g. a DigitalOcean droplet)

```bash
# Connect to the server
ssh root@174.138.4.109
```

#### Move data between your local and remote computers with `scp`

Copy a directory from local to remote computer:

```bash
# Local terminal
scp -r data root@174.138.4.109:/tmp
```

```bash
# Remote terminal
ls /tmp/data
```

Copy directory from a remote host to local host:

```bash
# Local terminal
scp -r root@174.138.4.109:/tmp/data ~/Downloads
ls ~/Downloads/data
```


#### Move data between a server and a container, and between containers

> Volumes are the preferred mechanism for persisting data generated by and used
by Docker containers. While **bind mounts** are dependent on the directory
structure and OS of the host machine, **volumes** are completely managed by
Docker.  
-- https://docs.docker.com/storage/volumes/

```bash
# Connect to the server
ssh root@174.138.4.109
```

```bash
# Run a container from https://www.rocker-project.org/
docker run --rm -d --name my_container \
  -p 8787:8787 -e PASSWORD=123 \
  
  -v /bind_mount:/bind_mount \
  -v volume_managed_by_docker:/volume_managed_by_docker \
  
  -e ROOT=true \
  rocker/verse
```

```bash
# `volume_managed_by_docker` is more portable
# It does not depend on the host's file system
docker volume ls
ls /
```

```bash
# Login to rstudio at http://174.138.4.109:8787

# `/bind_mount` is less portable
# It depends on the host's file system
ls /
```

### Resources

* [How to setup SSH keys](https://www.digitalocean.com/community/tutorial_collections/how-to-set-up-ssh-keys), or go to <https://cloud.digitalocean.com/account/security> then "Add SSH Key".

* [`scp` explained](https://phoenixnap.com/kb/linux-scp-command)

### Cleanup

```bash
# Local terminal
rm -rf /tmp/data
rm -rf ~/Downloads
```

```bash
# Remote terminal
rm -rf /tmp/data
docker stop my_container
docker volume rm docker_volume volume_managed_by_docker
```
